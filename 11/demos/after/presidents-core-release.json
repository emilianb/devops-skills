{"source":2,"id":10,"revision":9,"name":"presidents-core-release","description":null,"createdBy":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"createdOn":"2017-08-08T18:05:01.977Z","modifiedBy":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"modifiedOn":"2017-08-13T23:46:37.630Z","lastRelease":null,"path":"\\","variables":{},"variableGroups":[1],"environments":[{"id":14,"name":"dev","rank":1,"owner":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"variables":{"ConnectionString":{"value":"Server=azdemo17-sql; Initial Catalog=president-core-dev; User Id=president-user; Password=Pa$$word;"},"DeployDirectory":{"value":"\\\\azdemo17-web1\\wwwroot\\presidents-core-dev"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":41}]},"deployStep":{"tasks":[],"id":42},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":43}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":6,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"252b8a23-b221-483a-9cf3-74dac5a091b0","version":"1.*","name":"Update connection string 'default' for EF Core migration deploy","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/api/Benday.Presidents.Api/appsettings.json","keyname":"default","connectionstringvalue":"$(ConnectionString)"}},{"taskId":"252b8a23-b221-483a-9cf3-74dac5a091b0","version":"1.*","name":"Update connection string 'default'","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/web/Benday.Presidents.WebUi/appsettings.json","keyname":"default","connectionstringvalue":"$(ConnectionString)"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"1.*","name":"Run script $(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/util/efcoreutil/deploy-ef-migrations.bat","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/util/efcoreutil/deploy-ef-migrations.bat","arguments":"Benday.Presidents.Api","modifyEnvironment":"false","workingFolder":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/api/Benday.Presidents.Api","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Files to: $(DeployDirectory)","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/web/Benday.Presidents.WebUi","Contents":"**","TargetFolder":"$(DeployDirectory)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":15,"name":"qa","rank":2,"owner":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"variables":{"ConnectionString":{"value":"Server=azdemo17-sql; Initial Catalog=president-core-qa; User Id=president-user; Password=Pa$$word;"},"DeployDirectory":{"value":"\\\\azdemo17-web1\\wwwroot\\presidents-core-qa"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":true,"approver":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"id":44}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":45},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":46}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":6,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"252b8a23-b221-483a-9cf3-74dac5a091b0","version":"1.*","name":"Update connection string 'default' for EF Core migration deploy","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/api/Benday.Presidents.Api/appsettings.json","keyname":"default","connectionstringvalue":"$(ConnectionString)"}},{"taskId":"252b8a23-b221-483a-9cf3-74dac5a091b0","version":"1.*","name":"Update connection string 'default'","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/web/Benday.Presidents.WebUi/appsettings.json","keyname":"default","connectionstringvalue":"$(ConnectionString)"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"1.*","name":"Run script $(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/util/efcoreutil/deploy-ef-migrations.bat","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/util/efcoreutil/deploy-ef-migrations.bat","arguments":"Benday.Presidents.Api","modifyEnvironment":"false","workingFolder":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/api/Benday.Presidents.Api","failOnStandardError":"false"}},{"taskId":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","version":"2.*","name":"Copy Files to: $(DeployDirectory)","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"SourceFolder":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/web/Benday.Presidents.WebUi","Contents":"**","TargetFolder":"$(DeployDirectory)","CleanTargetFolder":"true","OverWrite":"true","flattenFolders":"false"}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"dev","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}},{"id":16,"name":"production","rank":3,"owner":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"variables":{"ConnectionString":{"value":null,"isSecret":true},"DeployDirectory":{"value":"\\\\azdemo17-web1\\wwwroot\\presidents-core-qa"}},"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"id":47}],"approvalOptions":{"requiredApproverCount":0,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMintues":43200}},"deployStep":{"tasks":[],"id":48},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":49}]},"deployPhases":[{"deploymentInput":{"parallelExecution":{"parallelExecutionType":"none"},"skipArtifactsDownload":false,"timeoutInMinutes":0,"queueId":6,"demands":[],"enableAccessToken":false},"rank":1,"phaseType":1,"name":"Run on agent","workflowTasks":[{"taskId":"252b8a23-b221-483a-9cf3-74dac5a091b0","version":"1.*","name":"Update connection string 'default' for EF Core migration deploy","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/api/Benday.Presidents.Api/appsettings.json","keyname":"default","connectionstringvalue":"$(ConnectionString)"}},{"taskId":"252b8a23-b221-483a-9cf3-74dac5a091b0","version":"1.*","name":"Update connection string 'default'","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/web/Benday.Presidents.WebUi/appsettings.json","keyname":"default","connectionstringvalue":"$(ConnectionString)"}},{"taskId":"bfc8bf76-e7ac-4a8c-9a55-a944a9f632fd","version":"1.*","name":"Run script $(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/util/efcoreutil/deploy-ef-migrations.bat","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"filename":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/util/efcoreutil/deploy-ef-migrations.bat","arguments":"Benday.Presidents.Api","modifyEnvironment":"false","workingFolder":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/api/Benday.Presidents.Api","failOnStandardError":"false"}},{"taskId":"497d490f-eea7-4f2b-ab94-48d9c1acdcb1","version":"3.*","name":"Azure App Service Deploy: ps-devops-presidents-core","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"definitionType":"task","inputs":{"ConnectedServiceName":"5ecca823-bcd3-4540-b4df-21e19d937dc6","WebAppName":"ps-devops-presidents-core","ServerfarmId":"/subscriptions/17c6c092-3a4f-4ac1-a514-c47f08e48e43/resourceGroups/ps-devops-presidents/providers/Microsoft.Web/serverfarms/plan-presidents-dotnet","WebAppKind":"app","DockerNamespace":"","DockerRepository":"","DockerImageTag":"","StartupCommand":"","DeployToSlotFlag":"false","ResourceGroupName":"","SlotName":"","VirtualApplication":"","Package":"$(System.DefaultWorkingDirectory)/presidents-core-ci/drop/for-deploy/web/Benday.Presidents.WebUi","WebAppUri":"","ScriptType":"","InlineScript":":: You can provide your deployment commands here. One command per line.","ScriptPath":"","TakeAppOfflineFlag":"true","UseWebDeploy":"true","SetParametersFile":"","RemoveAdditionalFilesFlag":"true","ExcludeFilesFromAppDataFlag":"false","AdditionalArguments":"","RenameFilesFlag":"true","GenerateWebConfig":"false","WebConfigParameters":"","XmlTransformation":"false","XmlVariableSubstitution":"false","JSONFiles":"","AppSettings":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":false},"demands":[],"conditions":[{"name":"qa","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":0,"queueDepthCount":0},"schedules":[],"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true}}],"artifacts":[{"sourceId":"4a0316b5-0caa-4642-8085-36edbfe79e83:20","type":"Build","alias":"presidents-core-ci","definitionReference":{"artifactSourceDefinitionUrl":{"id":"http://azdemo17-tfs:8080/tfs/_permalink/_build/index?collectionId=f2949dd4-6575-4135-bc3d-cdd27523d311&projectId=4a0316b5-0caa-4642-8085-36edbfe79e83&definitionId=20","name":""},"defaultVersionType":{"id":"latestType","name":"Latest"},"definition":{"id":"20","name":"presidents-core-ci"},"project":{"id":"4a0316b5-0caa-4642-8085-36edbfe79e83","name":"pluralsight-devops"}},"isPrimary":true}],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/4a0316b5-0caa-4642-8085-36edbfe79e83/_apis/Release/definitions/10","_links":{"self":{"href":"http://azdemo17-tfs:8080/tfs/DefaultCollection/4a0316b5-0caa-4642-8085-36edbfe79e83/_apis/Release/definitions/10"},"web":{"href":"http://azdemo17-tfs:8080/tfs/DefaultCollection/4a0316b5-0caa-4642-8085-36edbfe79e83/_release?definitionId=10"}},"tags":[],"properties":{}}