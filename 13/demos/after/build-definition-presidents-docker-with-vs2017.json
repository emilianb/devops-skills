{"build":[{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"NuGet restore **\\*.sln","timeoutInMinutes":0,"task":{"id":"333b11bd-d341-40d9-afcf-b32d5ce6f23b","versionSpec":"1.*","definitionType":"task"},"inputs":{"solution":"$(Parameters.solution)","selectOrConfig":"select","feed":"","includeNuGetOrg":"true","nugetConfigPath":"","noCache":"false","packagesDirectory":"","verbosity":"-"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Build solution **\\*.sln","timeoutInMinutes":0,"task":{"id":"71a9a2d3-a98a-4caa-96ab-affca411ecda","versionSpec":"1.*","definitionType":"task"},"inputs":{"solution":"$(Parameters.solution)","vsVersion":"15.0","msbuildArgs":"","platform":"$(BuildPlatform)","configuration":"$(BuildConfiguration)","clean":"false","maximumCpuCount":"false","restoreNugetPackages":"true","msbuildArchitecture":"x86","logProjectEvents":"true","createLogFile":"false"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"VsTest - Run Unit Tests","timeoutInMinutes":0,"task":{"id":"ef087383-ee5e-42c7-9a53-ab56c98420f9","versionSpec":"2.*","definitionType":"task"},"inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\$(BuildConfiguration)\\*unittest*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"False","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"False","runTestsInIsolation":"False","pathtoCustomTestAdapters":"","codeCoverageEnabled":"False","otherConsoleOptions":"","testRunTitle":"","platform":"$(BuildPlatform)","configuration":"$(BuildConfiguration)","publishRunAttachments":"true"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Publish webui for docker and build docker image","timeoutInMinutes":0,"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"1.*","definitionType":"task"},"inputs":{"scriptType":"filePath","scriptName":"Presidents_DotnetCore/docker-images/build.ps1","arguments":"","workingFolder":"Presidents_DotnetCore/docker-images","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","failOnStandardError":"false"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Start president database docker containers","timeoutInMinutes":0,"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"1.*","definitionType":"task"},"inputs":{"scriptType":"filePath","scriptName":"Presidents_DotnetCore/docker-images/up-in-background.ps1","arguments":"","workingFolder":"Presidents_DotnetCore/docker-images","inlineScript":"# You can write your powershell scripts inline here. \n# You can also pass predefined and custom variables to this scripts using arguments\n\n Write-Host \"Hello World\"","failOnStandardError":"false"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Get the IP address for the docker web container","timeoutInMinutes":0,"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"1.*","definitionType":"task"},"inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","workingFolder":"","inlineScript":"$containerIpAddress = docker inspect --format '{{ .NetworkSettings.Networks.nat.IPAddress }}' \"dockerimages_benday.presidents.webui_1\" | Out-String\n\nWrite-Host \"##vso[task.setvariable variable=ContainerIpAddress]$containerIpAddress\"\nWrite-Host \"##vso[task.setvariable variable=UrlForPresidentsWebContainer]http://$containerIpAddress\"\n","failOnStandardError":"true"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Update URL for selenium tests in app.config","timeoutInMinutes":0,"task":{"id":"d37c23be-c7e6-45c7-9dfe-25618716cc86","versionSpec":"1.*","definitionType":"task"},"inputs":{"filename":"Presidents_DotnetCore/test/Benday.Presidents.UserInterfaceTests/bin/$(BuildConfiguration)/Benday.Presidents.UserInterfaceTests.dll.config","keyname":"Presidents.Selenium.BaseUrl","appsettingsvalue":"$(UrlForPresidentsWebContainer)"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"Read the contents of app.config","timeoutInMinutes":0,"task":{"id":"e213ff0f-5d5c-4791-802d-52ea3e7be1f1","versionSpec":"1.*","definitionType":"task"},"inputs":{"scriptType":"inlineScript","scriptName":"","arguments":"","workingFolder":"Presidents_DotnetCore/test/Benday.Presidents.UserInterfaceTests/bin/$(BuildConfiguration)","inlineScript":"type Benday.Presidents.UserInterfaceTests.dll.config","failOnStandardError":"true"}},{"enabled":true,"continueOnError":false,"alwaysRun":false,"displayName":"VsTest - Run Selenium Tests","timeoutInMinutes":0,"task":{"id":"ef087383-ee5e-42c7-9a53-ab56c98420f9","versionSpec":"2.*","definitionType":"task"},"inputs":{"testSelector":"testAssemblies","testAssemblyVer2":"**\\$(BuildConfiguration)\\*userinterfacetest*.dll\n!**\\obj\\**","testPlan":"","testSuite":"","testConfiguration":"","tcmTestRun":"$(test.RunId)","searchFolder":"$(System.DefaultWorkingDirectory)","testFiltercriteria":"","runOnlyImpactedTests":"False","runAllTestsAfterXBuilds":"50","uiTests":"false","vstestLocationMethod":"version","vsTestVersion":"latest","vstestLocation":"","runSettingsFile":"","overrideTestrunParameters":"","runInParallel":"False","runTestsInIsolation":"False","pathtoCustomTestAdapters":"","codeCoverageEnabled":"False","otherConsoleOptions":"","testRunTitle":"","platform":"$(BuildPlatform)","configuration":"$(BuildConfiguration)","publishRunAttachments":"true"}},{"enabled":true,"continueOnError":false,"alwaysRun":true,"displayName":"Copy Files to: $(build.artifactstagingdirectory)","timeoutInMinutes":0,"task":{"id":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c","versionSpec":"2.*","definitionType":"task"},"inputs":{"SourceFolder":"$(build.sourcesdirectory)","Contents":"**\\bin\\$(BuildConfiguration)\\**","TargetFolder":"$(build.artifactstagingdirectory)","CleanTargetFolder":"false","OverWrite":"false","flattenFolders":"false"}},{"enabled":true,"continueOnError":false,"alwaysRun":true,"displayName":"Publish Artifact: drop","timeoutInMinutes":0,"task":{"id":"2ff763a7-ce83-4e1f-bc89-0ae63477cebe","versionSpec":"1.*","definitionType":"task"},"inputs":{"PathtoPublish":"$(build.artifactstagingdirectory)","ArtifactName":"drop","ArtifactType":"Container","TargetPath":"\\\\my\\share\\$(Build.DefinitionName)\\$(Build.BuildNumber)"}}],"options":[{"enabled":true,"definition":{"id":"5d58cc01-7c75-450c-be18-a388ddb129ec"},"inputs":{"branchFilters":"[\"+refs/heads/*\"]","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"7c555368-ca64-4199-add6-9ebaf0b0137d"},"inputs":{"multipliers":"[]","parallel":"false","continueOnError":"true","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"a9db38f9-9fdc-478c-b0f9-464221e58316"},"inputs":{"workItemType":"76","assignToRequestor":"true","additionalFields":"{}"}},{"enabled":false,"definition":{"id":"57578776-4c22-4526-aeb0-86b6da17ee9c"},"inputs":{}}],"variables":{"system.debug":{"value":"false","allowOverride":true},"BuildConfiguration":{"value":"release","allowOverride":true},"BuildPlatform":{"value":"any cpu","allowOverride":true}},"demands":["docker"],"retentionRules":[{"branches":["+refs/heads/*"],"artifacts":[],"artifactTypesToDelete":["FilePath","SymbolStore"],"daysToKeep":10,"minimumToKeep":1,"deleteBuildRecord":true,"deleteTestResults":true}],"_links":{"self":{"href":"http://azdemo17-tfs:8080/tfs/DefaultCollection/4a0316b5-0caa-4642-8085-36edbfe79e83/_apis/build/Definitions/24"},"web":{"href":"http://azdemo17-tfs:8080/tfs/_permalink/_build/index?collectionId=f2949dd4-6575-4135-bc3d-cdd27523d311&projectId=4a0316b5-0caa-4642-8085-36edbfe79e83&definitionId=24"},"editor":{"href":"http://azdemo17-tfs:8080/tfs/_permalink/_build/definitionEditor?collectionId=f2949dd4-6575-4135-bc3d-cdd27523d311&projectId=4a0316b5-0caa-4642-8085-36edbfe79e83&definitionId=24"}},"buildNumberFormat":"$(date:yyyyMMdd)$(rev:.r)","jobAuthorizationScope":"projectCollection","jobTimeoutInMinutes":60,"jobCancelTimeoutInMinutes":5,"repository":{"properties":{"cleanOptions":"0","labelSources":"0","labelSourcesFormat":"$(build.buildNumber)","reportBuildStatus":"true","gitLfsSupport":"false","skipSyncSource":"false","checkoutNestedSubmodules":"false","fetchDepth":"0"},"id":"2f3ec2d1-97c9-477e-9c2d-7a2a34b97f99","type":"TfsGit","name":"ps-presidents-core","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/pluralsight-devops/_git/ps-presidents-core","defaultBranch":"refs/heads/selenium","clean":"true","checkoutSubmodules":false},"processParameters":{"inputs":[{"options":{},"properties":{},"name":"solution","label":"Solution","defaultValue":"**\\*.sln","required":true,"type":"filePath","helpMarkDown":"The path to the Visual Studio solution file or NuGet packages.config. Wildcards can be used.  For example, `**\\\\*.sln` for all sln files in all sub folders."}]},"quality":"definition","authoredBy":{"id":"f899d987-ef00-4780-8c04-f69827c33722","displayName":"Benjamin Day","uniqueName":"DEMO\\benday","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/Identities/f899d987-ef00-4780-8c04-f69827c33722","imageUrl":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_api/_common/identityImage?id=f899d987-ef00-4780-8c04-f69827c33722"},"queue":{"id":6,"name":"Default","pool":{"id":1,"name":"Default"}},"id":24,"name":"presidents-docker-with-vs2017","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/4a0316b5-0caa-4642-8085-36edbfe79e83/_apis/build/Definitions/24","uri":"vstfs:///Build/Definition/24","path":"\\","type":"build","revision":13,"createdDate":"2017-08-29T15:26:15.033Z","project":{"id":"4a0316b5-0caa-4642-8085-36edbfe79e83","name":"pluralsight-devops","url":"http://azdemo17-tfs:8080/tfs/DefaultCollection/_apis/projects/4a0316b5-0caa-4642-8085-36edbfe79e83","state":"wellFormed","revision":44,"visibility":"private"}}